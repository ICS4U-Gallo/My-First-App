require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var s=e[n]=new t.Module(n);r[n][0].call(s.exports,i,s,s.exports)}return e[n].exports}function o(r){this.id=r,this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.isParcelRequire=!0,t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({4:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.LOG_LEVELS={ERROR:40,WARN:30,INFO:20,DEBUG:10,NOTSET:0},o=e.INFO,n=exports.getLogLevel=function(){return o},r=exports.setLogLevel=function(e){return o=e},t=function(n,r){if(!(n<o)){var t=n<=e.DEBUG?"log":n<=e.INFO?"info":n<=e.WARN?"warn":"error";try{(console[t]||console.log).apply(console,r)}catch(e){}}};t.debug=function(){t(e.DEBUG,arguments)},t.info=function(){t(e.INFO,arguments)},t.warn=function(){t(e.WARN,arguments)},t.error=function(){t(e.ERROR,arguments)},exports.default=t;
},{}],2:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./log"),t=o(e);function o(e){return e&&e.__esModule?e:{default:e}}var r=function(){var e={find:function(o,r,f,d){if(f>o+15||d>r+15)return t.default.debug("Skip ScrollFinder:\n          "+f+" > "+o+" + 15 => "+(f>o+15)+" or\n          "+d+" > "+r+" + 15 => "+(d>r+15)+"\n            "),{};var n=document.body;if(!n)return t.default.debug("Skip ScrollFinder: no document.body"),{};for(var i=[n],l=0,u=n,a=null;i.length;){var s=!1,c=i.pop();if(c.nodeType===c.ELEMENT_NODE){var h=c.offsetHeight,p=c.scrollHeight;if(p>h+5&&h>50&&p>l&&c.offsetWidth>40){var g=window.getComputedStyle(c);"hidden"!==g.overflowY&&"visible"!==g.overflowY&&(l=p,u=c,a=g,s=!0)}s||i.push.apply(i,c.childNodes)}}var v=e._offset(u),b=u.offsetHeight,y=u.offsetWidth,m=u.scrollWidth;if(a&&"hidden"===a.overflowX){var w=parseFloat(a.paddingLeft)||0,x=parseFloat(a.paddingRight)||0;v.x+=w,y-=w+x,m-=x+x}return u===document.body?(t.default.debug("Skip ScrollFinder: max_elt is body: ("+m+", "+l+")"),{}):{elt:u,scrollHeight:l,scrollWidth:Math.max(y,m),top:v.y,bottom:v.y+b,left:v.x,right:v.x+y,height:b,width:y}},bodyBg:function(){for(var e=[document.body,document.documentElement].filter(function(e){return e});e.length;){var t=e.shift(),o=window.getComputedStyle(t).backgroundColor||"";if("transparent"!==o&&!o.match(/^rgba\(\d+,\s*\d+,\s*\d+,\s*0\)$/))return o}return"#ffffff"},_offset:function(e){var t=0,o=0;do{t+=e.offsetLeft||0,o+=e.offsetTop||0,e=e.offsetParent}while(e);return{x:t,y:o}}};return e}();exports.default=r;
},{"./log":4}],3:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SCROLL_PAD_INNER=exports.SCROLL_PAD=void 0;var t=require("./log"),e=o(t);function o(t){return t&&t.__esModule?t:{default:t}}var n=exports.SCROLL_PAD=200,i=exports.SCROLL_PAD_INNER=100,r=function(){var t=[],o=[],i={init:function(){var t=document.body;t&&"scroll"===window.getComputedStyle(t).overflowY&&i.add(t,{overflowY:"visible"}),i.hideScrollbars(),i.hacks()},_add:function(t,e,o){if(t){var n=t.style.cssText;i._applyStyles(t,e),o.push({elt:t,before:n,after:t.style.cssText})}},add:function(e,o){return i._add(e,o,t)},addFixed:function(t,e){return i._add(t,e,o)},_pop:function(t){var e=t.pop();e&&("new_elt"===e.action?e.elt.parentNode.removeChild(e.elt):e.elt.style.cssText=e.before)},popAll:function(){for(e.default.debug("Styles popping stack",t.length);t.length;)i._pop(t)},popAllFixed:function(){for(;o.length;)i._pop(o)},initFixed:function(){if(document.body){var t=window.getComputedStyle(document.body),e={position:"relative"};"inline"===t.dislpay&&(e.display="block");var o=!1;"none"===t.maxWidth&&(e.minWidth="100vw",o=r.isBoxSizingRisky(t)),"none"===t.maxHeight&&(e.minHeight="100vh",o=o||r.isBoxSizingRisky(t,!0)),o&&(e.boxSizing="border-box"),i.add(document.body,e)}},updateFixed:function(t){var o=i._getFixedAndStickyElts(t),n=o.fixed,r=o.sticky,a=o.fixedBg;return n.forEach(function(t){e.default.debug("fixed -> absolute",t);var o=window.getComputedStyle(t),n=i.pxToInt(o.left),r=i.pxToInt(o.top),a=i.pxToInt(o.bottom);i.addFixed(t,{position:"absolute"});var d=i._offsets(t.offsetParent),l=n-d.left,c=r-d.top;e.default.debug("    oldLeft",n,o.left),e.default.debug("    oldTop",r,o.top),e.default.debug("    oldTop",a,o.bottom),e.default.debug("    parOffset",JSON.stringify(d)),e.default.debug("    left",l,"top",c);var s=!1,u={};!isNaN(l)&&l<=0&&(s=!0,u.left=l+"px"),!isNaN(c)&&c<=0&&(s=!0,0===a?u.bottom="0px":u.top=c+"px"),s&&i.addFixed(t,u)}),r.forEach(function(t){e.default.debug("sticky -> relative",t),i.add(t,{position:"relative",top:"auto",left:"auto",right:"auto",bottom:"auto"})}),a.forEach(function(t){e.default.debug("fixedBg -> scroll",t),i.add(t,{backgroundAttachment:"scroll"})}),n.length+r.length},_getFixedAndStickyElts:function(t){var o=[],r=[],a=[],l={fixed:o,sticky:r,fixedBg:a};if(!document.body)return l;for(var c=d(document.body.getElementsByTagName("*")),s=c.length,u=function(d){var l=c[d],s=window.getComputedStyle(l),u=s.position;if("sticky"===u)r.push(l);else if("fixed"===u){var f={};["top","right","bottom","left","width","height"].forEach(function(t){return f[t]=i.pxToInt(s.getPropertyValue(t))});f.top<20&&(f.height<n-f.top||0===f.left&&0===f.right)?t&&e.default.debug("skip fixed header",l):f.top+f.height<0||f.right+f.width<0||f.bottom+f.height<0||f.left+f.width<0?t&&e.default.debug("skip fixed offscreen",JSON.stringify(f),l):o.push(l)}"fixed"===s.backgroundAttachment&&a.push(l)},f=0;f<s;f++)u(f);return[document.documentElement,document.body].forEach(function(t){t&&("fixed"===window.getComputedStyle(t).backgroundAttachment&&a.push(t))}),l},pxToInt:function(t){return parseInt(t,10)},_applyStyles:function(t,e){if(t){var o=t.style.cssText+"; ";for(var n in e){o+=i._camelToDash(n)+": "+e[n]+" !important; "}t.style.cssText=o}},_offsets:function(t){for(var e=0,o=0,n=t;n;)e+=n.offsetLeft,o+=n.offsetTop,n=n.offsetParent;return{left:e,top:o}},_camelToDash:function(t){return t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()},hideScrollbars:function(){(i._isTouch()||i._isImage())&&i.add(document.documentElement,{overflow:"hidden"}),i._hideScrollbars(["html","body"])},_isTouch:function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}},_isImage:function(){var t=document.contentType;return t&&t.startsWith("image/")},_hideScrollbars:function(t){var e=t.map(function(t){return t+"::-webkit-scrollbar"}).join(", ")+"{ width: 0 !important; height: 0 !important }";i.addStyleSheet(e)},hideScrollbarsInner:function(o){if(o.id||(o.id=a.next()),i._twitchHideScrollbars(o))e.default.debug("Hide scrollbars twitch");else{var n="#"+i._escape(o.id),d=o.scrollWidth;i._hideScrollbars([n]),d!==o.scrollWidth?(r._pop(t),r._gmailHideScrollbars(n),e.default.debug("Hide scrollbars gmail")):e.default.debug("Hide scrollbars normal")}},_twitchHideScrollbars:function(t){if(t.classList&&t.classList.contains("simplebar-scroll-content")){var e=d(t.parentNode.childNodes).find(function(t){return t.nodeType===t.ELEMENT_NODE&&t.classList&&t.classList.contains("simplebar-track")&&t.classList.contains("vertical")});return i.add(e,{opacity:0}),!0}return!1},_gmailHideScrollbars:function(t){var e=["::-webkit-scrollbar-button { width: 0 !important; height: 0 !important; display: none !important; }","::-webkit-scrollbar-corner { background-color: transparent !important; border: 0 !important }","::-webkit-scrollbar-thumb { background-color: transparent !important; box-shadow: none !important }"].map(function(e){return""+t+e}).join("\n");i.addStyleSheet(e)},addStyleSheet:function(e){var o=document.createElement("style");o.innerHTML=e;var n=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];n&&(n.appendChild(o),t.push({elt:o,action:"new_elt"}))},_escape:function(t){return window.CSS&&window.CSS.escape?window.CSS.escape(t):t.replace(":","\\:")},hacks:function(){i._quoraHack()},_quoraHack:function(){var t=window.location.host;if("quora.com"===t||t.endsWith("quora.com")){i.addStyleSheet(".Answer.ActionBar.sticky { position: static !important }")}},isBoxSizingRisky:function(t,e){var o=["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"];!0!==e&&o.push("paddingRight","paddingLeft","borderRightWidth","borderRightWidth");var n=o.some(function(e){return t[e]&&"0px"!==t[e]});return"content-box"===t.boxSizing&&n}};return i}();exports.default=r;var a=function(){var t=0;return{next:function(){return"__FPSC_ID_"+ ++t+"_"+(new Date).getTime()}}}(),d=function(t){return Array.prototype.slice.call(t)};
},{"./log":4}],1:[function(require,module,exports) {
"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=require("./js/libpage/scrollfinder"),i=a(e),r=require("./js/libpage/styles"),o=a(r),n=require("./js/libpage/log"),l=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var h=!1;h&&(0,n.setLogLevel)(n.LOG_LEVELS.DEBUG);var u=150,d={capture:"capture",captureError:"captureError"},s=[];for(var g in d)s.push(d[g]);function c(){window._screenCapturePreviousListener&&chrome.runtime.onMessage.removeListener(window._screenCapturePreviousListener),chrome.runtime.onMessage.addListener(f),window._screenCapturePreviousListener=f}function f(t,e,i){if("scrollPage"===t.msg){try{p(i,t.opts)}catch(t){H(t)}return!0}"logMessage"==t.msg?l.default.info("[POPUP LOG]",t.data):s.indexOf(t.msg)>-1?l.default.info("Ignoring message sent by self: "+t.msg):l.default.error("Unknown message received from background: "+t.msg)}function p(t,e){var i=document.documentElement,r=document.body,n=window.scrollX,a=window.scrollY;o.default.init(),e.fixed_elts&&o.default.initFixed();var h=w(i,r,e);function s(){o.default.popAll(),o.default.popAllFixed(),window.scrollTo(n,a)}h.innerElt&&o.default.hideScrollbarsInner(h.innerElt);var g=!0;function c(){try{!function(){if(!h.arrangements.length)return s(),void(t&&t());var i=h.arrangements.shift(),r=i.scrollX,f=i.scrollY;if(!i.elt)throw l.default.error("Missing next.elt!",i),new Error("Missing next.elt! "+i);var p=x(i.elt,r,f);window.setTimeout(function(){if(e.fixed_elts){var t=o.default.updateFixed(g);g=!1,t&&(n=window.scrollX,a=window.scrollY)}var r={msg:d.capture,x:p.x,y:p.y,complete:(h.numArrangements-h.arrangements.length)/h.numArrangements,clip:i.clip,capture:i.capture,canvasBg:h.canvasBg,bgRegions:h.bgRegions,windowWidth:h.windowWidth,totalWidth:h.fullWidth,totalHeight:h.fullHeight,devicePixelRatio:window.devicePixelRatio};window.setTimeout(function(){var t=window.setTimeout(function(){l.default.warn("Cleanup timeout triggered"),s()},6e3);chrome.runtime.sendMessage(r,function(e){window.clearTimeout(t),l.default.debug("sendMessage.callback",!!e),o.default.popAllFixed(),e?c():s()})},u)},20)}()}catch(t){H(t)}}c()}function w(t,e,i){var o=m(t,e,i),n=o.regions,a=o.bgRegions,h=o.fullWidth,u=o.fullHeight,d=o.canvasBg;y(n),v(a);var s=window.innerWidth,g=window.innerHeight,c=void 0,f=[];return n.forEach(function(t){var e=t.page;e.isInner&&e.elt&&(c=e.elt);for(var i={x:(e.eltOffsetLeft||0)+e.left,y:(e.eltOffsetTop||0)+e.top,width:e.eltWidth||Math.min(s,e.right-e.left),height:e.eltHeight||Math.min(g,e.bottom-e.top)},o=e.eltHeight||g,n=e.eltWidth||s,l=e.isInner?r.SCROLL_PAD_INNER:r.SCROLL_PAD,a=o-(o>l?l:0),u=n,d=e.bottom-o;d>-a;){for(var p=e.left;p<h;){var w={scrollX:p,scrollY:d,clip:i,capture:t.capture};t.page.elt&&(w.elt=t.page.elt),f.push(w),p+=u}d-=a}}),l.default.debug("fullWidth",h,"fullHeight",u),l.default.debug("windowWidth",s,"windowHeight",g),l.default.debug("REGIONS:",n),l.default.debug("ARRANGEMENTS:",f.slice()),{numArrangements:f.length,arrangements:f,bgRegions:a,canvasBg:d,fullWidth:h,fullHeight:u,windowWidth:s,windowHeight:g,innerElt:c}}function m(t,e,o){var n=e?window.getComputedStyle(e):{},a=[t.clientWidth,t.offsetWidth,"hidden"!==n.overflowX?t.scrollWidth:0,e?e.offsetWidth:0,e&&"hidden"!==n.overflowX?e.scrollWidth:0],h=window,u=[t.clientHeight,t.offsetHeight,"hidden"!==n.overflowY?t.scrollHeight:0],d=[e?e.offsetHeight:0,e&&"hidden"!==n.overflowY?e.scrollHeight:0],s=E(u),g=E(d);l.default.debug("docElt: "+JSON.stringify(u)),l.default.debug("body: "+JSON.stringify(d)),g-20>s&&(l.default.debug("Scroll via body: "+g+" vs "+s),h=e);var c=E(a),f=E([s,g]),p=c,w=f,m=window.innerWidth,y=window.innerHeight,v=(y>r.SCROLL_PAD&&r.SCROLL_PAD,o.adv_scroll?i.default.find(m,y,c,f):{});l.default.debug("scrll?",v,v.elt,o.adv_scroll);var b=[],x=[];if(v.elt){var W=v.bottom<f,H=v.right<c,L=void 0,O=void 0,S=void 0,R={page:{isInner:!0,elt:v.elt,eltHeight:v.height,eltWidth:v.width,eltOffsetLeft:v.left,eltOffsetTop:v.top,top:0,left:0,right:v.scrollWidth,bottom:v.scrollHeight},capture:{x:v.left,y:v.top,width:v.scrollWidth,height:v.scrollHeight}};W&&H&&b.push({page:{elt:h,top:v.bottom,left:v.right,right:c,bottom:f},capture:{x:v.right+(v.scrollWidth-v.width),y:v.bottom+(v.scrollHeight-v.height),width:c-v.right,height:f-v.bottom}}),W&&(L={page:{elt:h,top:v.bottom,left:0,right:v.right,bottom:f},capture:{x:0,y:v.bottom+(v.scrollHeight-v.height),width:v.right,height:f-v.bottom}},b.push(L),(O={x:L.capture.x+L.capture.width,y:L.capture.y,height:L.capture.height}).width=R.capture.width-v.width,S={x:R.capture.x,y:O.y,height:O.height,width:v.width},x.push({fill:O,sample:S})),H&&(L={page:{elt:h,top:0,left:v.right,right:c,bottom:v.bottom},capture:{x:v.right+(v.scrollWidth-v.width),y:0,width:c-v.right,height:v.bottom}},b.push(L),(O={x:L.capture.x,y:L.capture.y+L.capture.height,width:L.capture.width}).height=R.capture.y+R.capture.height-O.y,S={x:O.x,y:R.capture.y,width:O.width,height:L.page.bottom-R.capture.y},x.push({fill:O,sample:S})),L={page:{elt:h,top:0,left:0,right:v.right,bottom:v.bottom},capture:{x:0,y:0,width:v.right,height:v.bottom}},b.push(L),(O={x:0,y:L.capture.y+L.capture.height,width:R.capture.x}).height=R.capture.y+R.capture.height-O.y,S={x:O.x,y:R.capture.y,width:O.width,height:L.page.bottom-R.capture.y},x.push({fill:O,sample:S}),(O={x:L.capture.x+L.capture.width,y:0}).height=R.capture.y-O.y,O.width=R.capture.width-v.width,S={x:R.capture.x,y:O.y,width:v.width,height:O.height},x.push({fill:O,sample:S}),b.push(R);var M=R.page;p+=Math.max(0,M.right-M.eltWidth),w+=Math.max(0,M.bottom-M.eltHeight)}else b.push({page:{elt:h,top:0,left:0,right:c,bottom:f},capture:{x:0,y:0,width:c,height:f}});return{fullWidth:p,fullHeight:w,canvasBg:i.default.bodyBg(),regions:b,bgRegions:x}}function y(t){var e={page:{top:1,left:1,right:1,bottom:1},capture:{x:1,y:1,width:1,height:1}},i={eltHeight:1,eltWidth:1,eltOffsetTop:1,eltOffsetLeft:1};if(!(0===t.filter(function(t,r){var o=!1;if(!b(t,e)){o=!0;var n=JSON.stringify(t);l.default.error("Bad shape for region "+r+": "+n)}if(t.page&&t.page.isInner&&!b(t.page,i)){o=!0;var a=JSON.stringify(t.page);l.default.error("Bad capture element shape for region "+r+": "+a)}return o}).length))throw new Error("Bad regions setup!")}function v(t){var e={x:1,y:1,width:1,height:1};if(!(0===t.filter(function(t){["sample","fill"].filter(function(i){return t[i]?!b(t[i],e)&&(l.default.error("Bad bgRegion shape "+JSON.stringify(t[i])),!0):(l.default.error("Missing "+i+" element on bgRegion!"),!0)}).length}).length))throw new Error("Bad bgRegions setup!")}var b=function e(i,r){var o=void 0===i?"undefined":t(i);return o===(void 0===r?"undefined":t(r))&&("object"!==o||0===Object.keys(r).filter(function(t){return!0!==e(i[t],r[t])}).length)};function x(t,e,i){if(l.default.debug("scroll via",t,"to ("+e+", "+i+")"),t===document.body){var r=W(window),o=x(window,e,i);if(r.y!==o.y||r.x!==o.x)return o}if(t.scrollTo&&"function"==typeof t.scrollTo?t.scrollTo(e,i):(t.scrollLeft=e,t.scrollTop=i),"dispatchEvent"in t&&"CustomEvent"in window)try{t.dispatchEvent(new CustomEvent("scroll"))}catch(t){l.default.warn("Error triggering custom scroll event",t)}return W(t)}function W(t){return{x:void 0!==t.scrollX?t.scrollX:t.scrollLeft,y:void 0!==t.scrollY?t.scrollY:t.scrollTop}}function E(t){return Math.max.apply(Math,t.filter(function(t){return"number"==typeof t}))}function H(t){var e={msg:d.captureError,name:t?t.name:"unknown",message:t?t.message:"unknown",stack:t?t.stack:"unknown"};try{console.error(JSON.stringify(e))}catch(t){console.error(e)}chrome.runtime.sendMessage(e,function(){})}c();
},{"./js/libpage/scrollfinder":2,"./js/libpage/styles":3,"./js/libpage/log":4}]},{},[1])